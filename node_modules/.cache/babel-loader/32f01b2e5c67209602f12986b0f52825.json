{"ast":null,"code":"var _jsxFileName = \"/Users/jr1307/ajax_study/auction_srp/src/page/lp.js\";\nimport React, { Component } from \"react\";\nimport ItemCard from \"./components/itemcard\";\nimport ItemSort from \"./components/sort\";\nimport ItemFilter from \"./components/filter\";\nimport KeyWord from \"./components/keyword\";\nimport FilterLayer from \"./components/filterLayer\";\nimport axios from \"axios\";\n\nclass Listpage extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      renderList: [true, false, false],\n      itemLists: [],\n      itemFavoriteLists: [],\n      itemListsLength: 0,\n      itemFreeDeliveryLists: [],\n      viewTypeNumber: 0,\n      filterToggle: true,\n      filterActive: false,\n      freeDeliveryToggle: false,\n      keyWordLists: []\n    };\n\n    this.searchKeyword = () => {\n      const keyWordLists = this.state.keyWordLists.map((keyword, i) => {\n        return React.createElement(KeyWord, {\n          Category: keyword.CategoryNm,\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 24\n          },\n          __self: this\n        });\n      });\n      return keyWordLists;\n    };\n\n    this._makeItemList = () => {\n      const number = this.state.itemLists.length;\n      const itemLists = this.state.itemLists.slice(0, number).map(itemList => {\n        return React.createElement(ItemCard, {\n          key: itemList.ranking,\n          itemRanking: itemList.ranking,\n          itemImageURL: itemList.ImageURL,\n          itemBrandName: itemList.BrandName,\n          itemGoodsName: itemList.GoodsName,\n          itemSalePrice: itemList.SalePrice,\n          itemDeliveryText: itemList.Delivery.DeliveryText,\n          itemDeliveryInfo: itemList.Delivery.DeliveryInfo,\n          itemBuyCount: itemList.BuyCount,\n          IsFavoriteSeller: itemList.IsFavoriteSeller,\n          addFavorite: this.addFavorite,\n          favoriteToggle: this.state.favoriteToggle,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 33\n          },\n          __self: this\n        });\n      });\n      return itemLists;\n    };\n\n    this._callApi = () => {\n      return axios(\"./SearchJson.json\").then(({\n        data\n      }) => {\n        this.setState({\n          itemLists: data.Item,\n          keyWordLists: data.Category\n        });\n      }).catch(err => console.log(err));\n    };\n\n    this.filterToggle = () => {\n      //const toggle = this.state.filterActive ? 'false' : 'true'\n      this.setState({\n        filterActive: !this.state.filterActive\n      });\n    };\n\n    this.layerClose = () => {\n      this.setState({\n        filterActive: false\n      });\n    };\n\n    this.viewTypeFunc = typeNumber => {\n      this.setState({\n        viewTypeNumber: typeNumber\n      });\n    };\n\n    this.sortRank = () => {\n      const number = this.state.itemLists.length;\n      const sortList = this.state.itemLists.slice(0, number).sort(function (a, b) {\n        return a[\"ranking\"] - b[\"ranking\"];\n      });\n      this.setState({\n        renderList: [true, false, false],\n        itemLists: sortList\n      });\n    };\n\n    this.sortRowPrice = () => {\n      const number = this.state.itemLists.length;\n      const sortList = this.state.itemLists.slice(0, number).sort(function (a, b) {\n        return a[\"SellPrice\"] - b[\"SellPrice\"];\n      });\n      this.setState({\n        renderList: [false, false, true],\n        itemLists: sortList\n      });\n    };\n\n    this.sortBuyCount = () => {\n      const number = this.state.itemLists.length;\n      const sortList = this.state.itemLists.slice(0, number).sort(function (a, b) {\n        return b[\"BuyCount\"] - a[\"BuyCount\"];\n      });\n      this.setState({\n        renderList: [false, true, false],\n        itemLists: sortList\n      });\n    };\n\n    this.makeFreeDeliveryFunc = () => {\n      this.setState({\n        freeDeliveryToggle: !this.state.freeDeliveryToggle\n      });\n\n      if (!this.state.freeDeliveryToggle) {\n        this.freeDeliveryFunc();\n      } else {\n        this.freeDeliveryCancelFunc();\n      }\n    };\n\n    this.freeDeliveryFunc = () => {\n      const number = this.state.itemLists.length;\n      const itemFreeDeliveryLists = this.state.itemLists.slice(0, number).filter(itemList => {\n        return itemList.Delivery.DeliveryText === \"무료배송\";\n      });\n      this.setState({\n        itemLists: itemFreeDeliveryLists,\n        itemListsCopy: this.state.itemLists\n      });\n    };\n\n    this.freeDeliveryCancelFunc = () => {\n      this.setState({\n        itemLists: this.state.itemListsCopy\n      });\n    };\n\n    this.addFavorite = ranking => {\n      const changeFavorite = this.state.itemLists;\n      const index = this.state.itemLists.findIndex(todo => todo.ranking === ranking);\n      changeFavorite[index].IsFavoriteSeller = !changeFavorite[index].IsFavoriteSeller;\n    };\n  }\n\n  componentDidMount() {\n    this._callApi();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"content\",\n      className: this.state.viewTypeNumber ? \"state--content_view_type__list\" : \"state--content_view_type__gallery\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"section--content_body_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(ItemFilter, {\n      searchKeyword: this.searchKeyword,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"section--search_relative_information section--content_information_bar_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text--search_result\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      className: \"text--item_count result--text_color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, this.state.itemLists.length), React.createElement(\"span\", {\n      className: \"text--description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"em\", {\n      className: \"result--text_color\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, \"\\uAC1C\"), \"\\uC758 \\uAC80\\uC0C9 \\uACB0\\uACFC\")), React.createElement(ItemSort, {\n      renderList: this.state.renderList,\n      sortRowPrice: this.sortRowPrice,\n      sortBuyCount: this.sortBuyCount,\n      sortRank: this.sortRank,\n      makeItemList: this._makeItemList,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"link--button_filter link_active\",\n      onClick: this.filterToggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, \"\\uD544\\uD130\")), React.createElement(FilterLayer, {\n      filterActive: this.state.filterActive,\n      layerClose: this.layerClose,\n      viewTypeFunc: this.viewTypeFunc,\n      viewTypeNumber: this.state.viewTypeNumber,\n      makeFreeDeliveryFunc: this.makeFreeDeliveryFunc,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      id: \"region--content_body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 205\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      id: \"section--inner_content_body_container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"section--module_wrap\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, this._makeItemList())))));\n  }\n\n}\n\nexport default Listpage;","map":{"version":3,"sources":["/Users/jr1307/ajax_study/auction_srp/src/page/lp.js"],"names":["React","Component","ItemCard","ItemSort","ItemFilter","KeyWord","FilterLayer","axios","Listpage","state","renderList","itemLists","itemFavoriteLists","itemListsLength","itemFreeDeliveryLists","viewTypeNumber","filterToggle","filterActive","freeDeliveryToggle","keyWordLists","searchKeyword","map","keyword","i","CategoryNm","_makeItemList","number","length","slice","itemList","ranking","ImageURL","BrandName","GoodsName","SalePrice","Delivery","DeliveryText","DeliveryInfo","BuyCount","IsFavoriteSeller","addFavorite","favoriteToggle","_callApi","then","data","setState","Item","Category","catch","err","console","log","layerClose","viewTypeFunc","typeNumber","sortRank","sortList","sort","a","b","sortRowPrice","sortBuyCount","makeFreeDeliveryFunc","freeDeliveryFunc","freeDeliveryCancelFunc","filter","itemListsCopy","changeFavorite","index","findIndex","todo","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport ItemCard from \"./components/itemcard\";\nimport ItemSort from \"./components/sort\";\nimport ItemFilter from \"./components/filter\";\nimport KeyWord from \"./components/keyword\";\nimport FilterLayer from \"./components/filterLayer\";\nimport axios from \"axios\";\n\nclass Listpage extends Component {\n  state = {\n    renderList: [true, false, false],\n    itemLists: [],\n    itemFavoriteLists: [],\n    itemListsLength: 0,\n    itemFreeDeliveryLists: [],\n    viewTypeNumber: 0,\n    filterToggle: true,\n    filterActive: false,\n    freeDeliveryToggle: false,\n    keyWordLists: []\n  };\n  searchKeyword = () => {\n    const keyWordLists = this.state.keyWordLists.map((keyword, i) => {\n      return <KeyWord Category={keyword.CategoryNm} key={i} />;\n    });\n    return keyWordLists;\n  };\n\n  _makeItemList = () => {\n    const number = this.state.itemLists.length;\n    const itemLists = this.state.itemLists.slice(0, number).map(itemList => {\n      return (\n        <ItemCard\n          key={itemList.ranking}\n          itemRanking={itemList.ranking}\n          itemImageURL={itemList.ImageURL}\n          itemBrandName={itemList.BrandName}\n          itemGoodsName={itemList.GoodsName}\n          itemSalePrice={itemList.SalePrice}\n          itemDeliveryText={itemList.Delivery.DeliveryText}\n          itemDeliveryInfo={itemList.Delivery.DeliveryInfo}\n          itemBuyCount={itemList.BuyCount}\n          IsFavoriteSeller={itemList.IsFavoriteSeller}\n          addFavorite={this.addFavorite}\n          favoriteToggle={this.state.favoriteToggle}\n        />\n      );\n    });\n    return itemLists;\n  };\n\n  _callApi = () => {\n    return axios(\"./SearchJson.json\")\n      .then(({ data }) => {\n        this.setState({\n          itemLists: data.Item,\n          keyWordLists: data.Category\n        });\n      })\n      .catch(err => console.log(err));\n  };\n\n  //필터 온오프 클래스 불린값 설정 함수\n  filterToggle = () => {\n    //const toggle = this.state.filterActive ? 'false' : 'true'\n    this.setState({\n      filterActive: !this.state.filterActive\n    });\n  };\n\n  // 필터 레이어 닫기 함수\n  layerClose = () => {\n    this.setState({\n      filterActive: false\n    });\n  };\n\n  // 리스트뷰 타입 넘버 받아오는 함수\n  viewTypeFunc = typeNumber => {\n    this.setState({\n      viewTypeNumber: typeNumber\n    });\n  };\n  //랭킹순\n  sortRank = () => {\n    const number = this.state.itemLists.length;\n    const sortList = this.state.itemLists.slice(0, number).sort(function(a, b) {\n      return a[\"ranking\"] - b[\"ranking\"];\n    });\n    this.setState({\n      renderList: [true, false, false],\n      itemLists: sortList\n    });\n  };\n\n  //낮은 가격순\n  sortRowPrice = () => {\n    const number = this.state.itemLists.length;\n    const sortList = this.state.itemLists.slice(0, number).sort(function(a, b) {\n      return a[\"SellPrice\"] - b[\"SellPrice\"];\n    });\n    this.setState({\n      renderList: [false, false, true],\n      itemLists: sortList\n    });\n  };\n\n  //구매순\n  sortBuyCount = () => {\n    const number = this.state.itemLists.length;\n    const sortList = this.state.itemLists.slice(0, number).sort(function(a, b) {\n      return b[\"BuyCount\"] - a[\"BuyCount\"];\n    });\n    this.setState({\n      renderList: [false, true, false],\n      itemLists: sortList\n    });\n  };\n  makeFreeDeliveryFunc = () => {\n    this.setState({\n      freeDeliveryToggle: !this.state.freeDeliveryToggle\n    });\n    if (!this.state.freeDeliveryToggle) {\n      this.freeDeliveryFunc();\n    } else {\n      this.freeDeliveryCancelFunc();\n    }\n  };\n\n  //무료배송\n  freeDeliveryFunc = () => {\n    const number = this.state.itemLists.length;\n    const itemFreeDeliveryLists = this.state.itemLists\n      .slice(0, number)\n      .filter(itemList => {\n        return itemList.Delivery.DeliveryText === \"무료배송\";\n      });\n    this.setState({\n      itemLists: itemFreeDeliveryLists,\n      itemListsCopy: this.state.itemLists\n    });\n  };\n\n  freeDeliveryCancelFunc = () => {\n    this.setState({\n      itemLists: this.state.itemListsCopy\n    });\n  };\n\n  addFavorite = ranking => {\n    const changeFavorite = this.state.itemLists;\n    const index = this.state.itemLists.findIndex(\n      todo => todo.ranking === ranking\n    );\n    changeFavorite[index].IsFavoriteSeller = !changeFavorite[index]\n      .IsFavoriteSeller;\n  };\n\n  componentDidMount() {\n    this._callApi();\n  }\n  render() {\n    return (\n      <div\n        id=\"content\"\n        className={\n          this.state.viewTypeNumber\n            ? \"state--content_view_type__list\"\n            : \"state--content_view_type__gallery\"\n        }\n      >\n        <div className=\"section--content_body_container\">\n          <ItemFilter searchKeyword={this.searchKeyword} />\n          <div className=\"section--search_relative_information section--content_information_bar_container\">\n            <div className=\"text--search_result\">\n              <span className=\"text--item_count result--text_color\">\n                {this.state.itemLists.length}\n              </span>\n              <span className=\"text--description\">\n                <em className=\"result--text_color\">개</em>의 검색 결과\n              </span>\n            </div>\n            <ItemSort\n              renderList={this.state.renderList}\n              sortRowPrice={this.sortRowPrice}\n              sortBuyCount={this.sortBuyCount}\n              sortRank={this.sortRank}\n              makeItemList={this._makeItemList}\n            />\n            <button\n              type=\"button\"\n              className=\"link--button_filter link_active\"\n              onClick={this.filterToggle}\n            >\n              필터\n            </button>\n          </div>\n          <FilterLayer\n            filterActive={this.state.filterActive}\n            layerClose={this.layerClose}\n            viewTypeFunc={this.viewTypeFunc}\n            viewTypeNumber={this.state.viewTypeNumber}\n            makeFreeDeliveryFunc={this.makeFreeDeliveryFunc}\n          />\n          <div id=\"region--content_body\">\n            <div id=\"section--inner_content_body_container\">\n              <div className=\"section--module_wrap\">{this._makeItemList()}</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\nexport default Listpage;\n"]},"metadata":{},"sourceType":"module"}